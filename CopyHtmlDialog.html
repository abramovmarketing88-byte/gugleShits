<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <base target="_top">
  <style>
    body { font-family: Arial, sans-serif; padding: 12px; margin: 0; }
    textarea { width: 100%; height: 200px; font-size: 12px; box-sizing: border-box; }
    .copy-btn { margin-top: 8px; padding: 8px 16px; cursor: pointer; }
    .hint { font-size: 11px; color: #666; margin-top: 4px; }
  </style>
</head>
<body>
  <p><strong>HTML для вставки в Avito</strong></p>
  <textarea id="htmlContent" readonly></textarea>
  <p class="hint">Нажмите «Копировать» и вставьте в поле описания на Avito (Ctrl+V).</p>
  <button class="copy-btn" id="copyBtn">Копировать</button>
  <script>
    (function() {
      var payload = <?!= contentJson ?>;
      document.getElementById('htmlContent').value = typeof payload === 'string' ? payload : '';
      var ta = document.getElementById('htmlContent');
      var btn = document.getElementById('copyBtn');
      btn.addEventListener('click', function() {
        ta.select();
        try {
          document.execCommand('copy');
          btn.textContent = 'Скопировано!';
          setTimeout(function() { btn.textContent = 'Копировать'; }, 2000);
        } catch (e) {
          if (navigator.clipboard && navigator.clipboard.writeText) {
            navigator.clipboard.writeText(ta.value).then(function() {
              btn.textContent = 'Скопировано!';
              setTimeout(function() { btn.textContent = 'Копировать'; }, 2000);
            });
          }
        }
      });
    })();
  </script>
</body>
</html>
